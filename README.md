# CPD/CE Concierge + Audit-Ready Tracker

> **CPD/CE compliance, done-for-you.** Plan + tracking + audit pack set up in 24 hours.

---

## Blueprint Overview

This project replicates the "$119 to type npm install" playbook for the CPD/CE (Continuing Professional Development / Continuing Education) market in financial adviser services. The model: hype → remove friction → simple landing page → paid search → white-glove fulfillment.

---

## 1. The Direct Analogue: "$119 to type npm install" in Adviser CPD

In CPD/CE, the real friction isn't learning  - it's:

- Figuring out which requirements apply (credential + state/country + role)
- Picking approved activities
- Tracking evidence / certificates
- Reporting in the right place
- Being audit-ready at the deadline

**The wedge offer:**

> "We set up your entire CPD/CE compliance system and plan  - done-for-you. You just complete the learning."

Same psychological trade:
- **DIY exists** (free, confusing, time-intensive)
- **Paid offer** removes anxiety + setup + admin

### Hype Waves to Ride

Trigger events that create urgency and lots of "how do I…" searches:

| Market | Trigger Event | Details |
|--------|--------------|---------|
| **US (CFP)** | CFP Board approved future increase to 40 CE hours per two-year cycle | Effective Q1 2027, plus carryover changes, practice management allowance, etc. Perfect "deadline + confusion" fuel. |
| **US (IAR)** | NASAA publishes state adoption list with effective dates | e.g., Illinois effective 1/1/2026 |
| **UK** | FCA requires 35 hours CPD annually | 21 structured (for retail investment activities) |

Build region/credential-specific funnels  - mirror the "hype wave" everyone is already discussing.

---

## 2. The Product: Full Feature Set

### Product Promise (The Headline)

**"CPD/CE, planned and audit-ready in 24 hours. No spreadsheets. No portals. No guesswork."**

### Core Product Modules

#### A) Requirements & Profile Engine (The "Wizard")

- Credential selection (CFP / RIA / IAR / insurance / etc.) and jurisdiction(s)
- Renewal deadlines + reporting periods (per credential/jurisdiction)
- Category constraints (ethics, structured/unstructured, firm element, etc.)
- "Your CPD gap" calculation: required vs completed
- 1-page compliance brief (PDF + dashboard view)

> This is the "non-technical user" moment: they don't want rules, they want a plan.

#### B) Done-for-You Setup (The "npm install" Equivalent)

What the team does after purchase:

- Create their CPD dashboard (account provisioning)
- Build their personalized CPD plan (calendar + course list)
- Set up reminders (email + calendar)
- Create an "audit binder" folder structure (cloud drive vault)
- Configure reporting workflow (who submits what, where, when)

**Deliverable:** "Your CPD system is live" email with:
- Dashboard link
- Plan calendar link
- "Next action" (one single next step)

#### C) Course/Content Layer (Revenue Scale)

Two options:

| Approach | Speed | Margin | Details |
|----------|-------|--------|---------|
| **Option 1: Partner/affiliate/resell** | Fastest | Lower | Wrap concierge + tracking around existing accredited providers |
| **Option 2: Become accredited provider** | Slower | Higher | Publish your own modules |

Platform features either way:
- Micro-modules (10–20 min)
- Live webinars (scheduled)
- Assessments where required
- Certificate issuance and storage

#### D) Tracking + Evidence Vault (Audit-Grade)

- Auto logging of completed modules (from platform/partners)
- Manual logging for external activities (with evidence upload)
- Structured vs unstructured tagging (esp. UK)
- Certificate vault with:
  - File naming conventions
  - Metadata (date, duration, learning outcome)
  - Exportable audit report (PDF/CSV)

#### E) Reporting / Submission Support

- "One-click export" reports for adviser and/or compliance manager
- Submission checklist (credential-specific)
- Optional concierge submission assistance (where allowed)
- Deadline countdown and escalation reminders

#### F) Firm / Team Dashboard (B2B Multiplier)

For RIAs, practices, networks:
- Seat management (users, roles)
- Compliance admin dashboard
- Completion status by adviser
- Audit report packs per adviser
- Policy templates + CPD policy acknowledgment tracking

#### G) Support & "CPD Helpdesk"

This is where conversion happens (people pay to avoid confusion):
- "Ask a human" CPD concierge (chat/email)
- Knowledge base: "What counts?" "How to log?" "Structured vs unstructured?"
- Office hours (group Q&A)

#### H) Guardrails (Critical)

Must be explicit:
- **You do not complete coursework or assessments for advisers**
- **You do not falsify logs**
- **You provide admin support, planning, tracking, and audit packaging**

This keeps you safe and builds trust (and avoids reputational death).

---

## 3. Packaging + Pricing

A clean ladder that converts cold search traffic:

### Tier 0  - DIY (Free)

- CPD spreadsheet template + instructions
- "Rules library" links
- No reminders, no audit pack, no support

> Don't write it in "max scary language" in this industry  - financial professionals sniff manipulation instantly. Instead: "If you enjoy DIY admin, here you go."

### Tier 1  - Setup (Impulse Buy)

**$119–$199 one-time**

- Requirements mapped
- CPD plan built
- Dashboard created
- Reminder system set
- Audit binder folder created
- 7-day email support

### Tier 2  - Managed (The Money Tier)

**$229–$499/year** (or $29–$79/mo)

- Everything in Tier 1
- Monthly check-ins ("you're on track")
- Evidence review (audit readiness)
- Quarterly compliance export
- Priority support
- Optional "deadline rescue" sprint

### Tier 3  - Firm (B2B)

**$X per seat + admin fee**

- Firm dashboard
- Policy templates
- Reporting for compliance officer
- Consolidated invoices
- Onboarding concierge for each adviser

---

## 4. Landing Page + Funnel

Landing page = fear reducer. Should read like a checklist.

### Above the Fold

- **Headline:** "CPD/CE compliance, done-for-you."
- **Subhead:** "Plan + tracking + audit pack set up in 24 hours."
- **CTA:** "Get set up" (single step)
- **Trust bar:** "Audit-ready exports • Reminders • Evidence vault"

### Section: "What you get in 24 hours"

Short bullet list of concrete deliverables (no fluff)

### Section: "Who this is for"

"CFP / IAR / RIA / UK adviser / insurance…"  - create separate pages per segment

### Section: "How it works"

1. Buy
2. Answer 10 questions
3. We set up everything
4. You complete learning, we keep it audit-ready

### Section: Pricing Ladder

DIY vs Setup vs Managed (simple comparison)

### FAQ

- "Does this count for my credential?" → "We map to your requirement profile; you choose approved activities; we track evidence."
- "Do you do the learning for me?" → **No**  - important
- "How do you handle audits?" → Audit binder + exports

### Checkout

- Ask only what you need to start
- Push everything else to the onboarding form

---

## 5. Paid Acquisition Campaign

### Channel Mix

| Channel | Use Case | Notes |
|---------|----------|-------|
| **Google Search** | Highest intent | Primary channel |
| **Retargeting (Google/Meta)** | Cheap conversions after first click | Must-have |
| **LinkedIn** | Firm tier (B2B) | Expensive for Tier 1 |
| **Partnerships** | Compliance consultants, adviser communities, newsletters | High trust |

### Search Campaign Structure

**Campaign 1: "Credential + Requirement"**
- "CFP CE requirements / 40 hours 2027 / ethics"
- "IAR CE requirement / NASAA IAR CE"
- "financial adviser CPD 35 hours structured" (UK)

**Campaign 2: "Outcome + Pain"**
- "CE tracking software"
- "CPD log template"
- "audit ready CE records"
- "CE deadline help"

**Campaign 3: Brand**
- Protects your name once you're known

### Landing Pages

1 landing page per ad group theme (don't send everyone to the homepage)

### Ad Copy Angles to Test

- "CPD audit pack set up in 24 hours"
- "Stop guessing what counts  - get a CPD plan"
- "CE tracking + evidence vault"
- "New CE changes? Don't scramble  - get set up"

### Retargeting Sequence

Retarget site visitors with:
- Testimonial / social proof
- "What you get in 24 hours" checklist
- Deadline reminders ("Don't leave it to the last month")

### Conversion Plumbing (Must-Have)

**Track:**
- View content
- Start checkout
- Purchase
- Onboarding completion
- Activation milestone (first module logged)

**Email Sequence:**
- Day 0: "Your CPD system is live"
- Day 2: "Your next best action"
- Day 7: "You're X% complete"
- Day 21: Upsell to Managed tier

---

## 6. How to Rank in ChatGPT Search and Google

### A) Ranking in ChatGPT Search

OpenAI is explicit: ranking is based on multiple factors for "reliable, relevant information"  - no guaranteed top placement.

**Action Checklist:**

1. In `robots.txt`, allow:
   ```
   User-agent: OAI-SearchBot
   Allow: /
   ```
2. If using a CDN/WAF, allow OpenAI's published IP ranges for OAI-SearchBot
3. Ensure pages are publicly accessible (no hard paywalls for core content)

**Be a source ChatGPT wants to cite:**
- Publish direct answers to high-intent questions ("What are the CE changes effective 2027?", "How to stay audit ready?")
- Include clear definitions and step-by-step checklists
- Keep pages updated (AI search penalizes stale content in practice)

> Note: ChatGPT Search may partner with third-party search providers (Bing, Shopify). Classic SEO still matters because upstream indexes feed the pipeline.

### B) Ranking in Google (and AI Overviews / AI Mode)

Google guidance: no special optimizations required beyond strong SEO fundamentals.

**Action Plan:**

#### 1. Build "Topic Clusters" Around High-Intent Searches

| Hub Page | Content |
|----------|---------|
| `/cfp-ce/` | Requirements, timelines, FAQs, calculator |
| `/iar-ce/` | State adoption, what counts, how to log |
| `/uk-adviser-cpd/` | Structured vs unstructured, audit trail |

#### 2. Add "Tools" That Attract Links and Citations

LLMs + Google both love pages that are uniquely useful:
- CE/CPD "hours remaining" calculator
- Downloadable audit checklist
- CPD policy template for firms
- "Deadline calendar" by credential

#### 3. Make Content Citeable

- Put the answer near the top (TL;DR + bullets)
- Use headings that match user questions verbatim
- Add a short FAQ
- Provide dates, definitions, summary boxes ("Effective Q1 2027…")

#### 4. Authority Building

- Guest posts on adviser industry sites
- Partnerships with compliance consultants
- Appear in "approved provider" directories if accredited
- Publish a small annual report (e.g., "State of Adviser CPD/CE 2026")

#### 5. Technical Hygiene

- Fast pages, minimal JS blocking
- Schema where appropriate (FAQ, Organization, Course/Event)
- Keep structured data consistent with on-page text

---

## 7. Domain Name Shortlist

### Naming Rules

- Avoid ambiguity: CPD vs CE (US vs UK/AU). If multi-region, consider "CPD" as brand, with "CE" pages.
- Avoid trademark magnets ("Copilot" = risky given Microsoft branding)
- Prefer .com; otherwise .co / .io / .education
- Pick something you can say on a podcast without spelling it twice

### Shortlist

**More Descriptive:**
- AuditReadyCPD.com
- CPDAuditPack.com
- AdvisorCPDHub.com
- CEforAdviserPros.com
- CPDCompliance.com

**More Brandable:**
- CPDVault.com
- CPDDesk.com
- CEBrief.com
- CPDSignals.com
- TrackMyCPD.com

### Recommendation

For "done-for-you" positioning:
- **AuditReadyCPD.com**  - best if CPD-first, UK/AU-forward
- **AuditReadyCE.com**  - best if US-first

Synonyms if taken:
- ProofReadyCPD.com
- CPDProof.com
- CPDReady.com

> Verify availability with a registrar + trademark check before committing.

---

## 8. 14-Day Launch Plan

| Days | Actions |
|------|---------|
| **1–2** | Choose 1 primary wedge: (CFP CE changes) OR (IAR CE state adoption) OR (UK adviser CPD). Build 1 landing page + checkout + onboarding form. |
| **3–5** | Create 5 "answer pages" targeting most-searched questions (800–1500 words each, updated dates, FAQ). Implement `robots.txt` allowing OAI-SearchBot. Ensure CDN access. |
| **6–7** | Launch Google Search ads (exact + phrase match), 10–20 keywords total, tight negatives. Retargeting pixel + 3 retargeting creatives. |
| **8–14** | Refine ads based on search terms report. Add 2 more landing pages for adjacent segments. Publish 3 more answer pages. Start partner outreach to compliance consultants / newsletters. |

---

## Compliance Note

CPD/CE sits adjacent to licensing and regulatory obligations. The product is explicitly about:

- **Planning**
- **Tracking**
- **Evidence management**
- **Reminders**
- **Reporting support**

...and **not** "we'll do your CE for you."

That keeps you on the right side of ethics and makes your brand durable.

---

## 9. UK Market Participants: What They Publish as CPD

The pattern is consistent: **free/low-friction content + structured CPD proof (certificate) + light gating + brand affinity + pipeline**.

| Provider | Content Format | CPD Mechanism | Key UX Pattern |
|----------|---------------|---------------|----------------|
| **Aviva** | Webinar hub with CPD minutes + learning outcomes | Attendance tracked as CPD minutes | Non-scary UI: outcomes + minutes + "watch now" |
| **Legal & General** | CPD Academy: frequent webinars/workshops | CII-accredited structured CPD | Positioned as "advice process improvement", not product training |
| **Zurich** | Learning Hub: short videos, live/on-demand webinars | Personalised certificates; stored in personal CPD file | "CPD file" = retention flywheel |
| **Royal London** | CPD modules + webinars (pensions/investment/protection) | Certificate unlocked via short quiz | Quiz = stronger "verifiable" CPD signal |
| **Aberdeen** | Free online CPD modules with outcomes | CII/PFS-accredited modules | "Translate detail into what it means for you and your clients" |
| **M&G Wealth** | Technical sessions with learning outcomes | CPD certificate claimed via form | Certificate claiming = lead capture + compliance moment |
| **Quilter Cheviot** | Adviser guides with CPD questionnaire | Certificate sent after questionnaire | Article -> assessment -> certificate (high leverage) |
| **Canada Life** | Academy: live/on-demand webinars + technical library | Personalised certificates | Academy + library = non-webinar assets keep CPD narrative |
| **Aegon** | CPD hub: webinars + CPD Hub library | "Complete questions, collect certificate" | Direct tie to structured CPD goals |
| **Scottish Widows** | Webinar series | Separate certificate request form | Split "watch" and "request certificate" reduces friction |
| **LV=** | Protection webinar calendar | Certificate per session | Calendar-first navigation = retention mechanic |
| **Morningstar** | On-demand adviser webinars | Quiz completion -> certificate emailed | On-demand + quiz = scalable (no scheduling pressure) |

### What They're Really Doing

1. **Publishing frequent, low-cost "education" content** that doubles as marketing
2. **Converting consumption into structured/verifiable CPD proof** via accreditation, quizzes, certificates
3. **Using CPD as a distribution channel**: registrations, reminders, certificate forms, and "CPD vaults" = owned audience engine

### Their Source Material Stack

| Layer | Examples |
|-------|---------|
| **Regulatory & compliance** | FCA 35h/year (21 structured), insurance distribution CPD, vulnerable customers |
| **Technical / product mechanics** | Tax year-end, pensions, investment, protection explainers |
| **Market / behavioural insight** | Intergenerational wealth, financial wellbeing, market updates |
| **Sales & practice management** | Advice process improvement, sales techniques (still CPD-framed) |

---

## 10. Replication Capability Checklist

### 1) Content Production Engine (Weekly Cadence)

- Editorial calendar by topic cluster (regulation, technical, client segments, practice management)
- SMEs (technical specialists, compliance, product, external guests)
- Standard template per asset:
  - Learning objectives/outcomes
  - Duration/minutes
  - Audience level (intro/intermediate/advanced)
  - "What changed / why it matters / what to do next"

### 2) "Proof" Engine (Turn Content into Structured/Verifiable CPD)

- Automated **certificate generator** (name, date, duration, outcomes, provider identity)
- **Assessment mechanic** (quiz or attestation)
- **Audit trail**: completion logs + certificate storage ("CPD file/vault" pattern)
- Optional: external accreditation relationships (CII / CISI in adviser context)

### 3) Distribution Engine

- Email list growth loops: register for webinar, claim certificate, download guide + CPD questionnaire
- Retention loops: "new CPD module this week", "you're X hours short", "export your CPD pack"

### 4) Governance

- Content QA and compliance sign-off
- Clear separation: **education vs promotion**
- Retention policy for certificates and logs (audit readiness)

---

## 11. Multi-Vertical Expansion: CPD by Professional Segment

### CPD Requirement Models by Regulator/Body

| Group | Body | Model | Product Implication |
|-------|------|-------|---------------------|
| **Nurses/midwives** | NMC | 35h/3yr; 20h participatory; accurate records | Track hours + participatory flag + records |
| **Doctors** | GMC | No mandated points; tailored to scope | Reflection + appraisal-ready evidence |
| **Pharmacists** | GPhC | 4 CPD records + peer discussion + reflective account | CPD entries + peer discussion workflow + reflective account |
| **HCPC registrants** | HCPC | CPD audit with profile guidance | Audit-pack exports + CPD profile builder |
| **Engineers** | Engineering Council | CPD recording mandatory; non-engagement risks removal | Painless recording + exportable CPD record |
| **IET members** | IET | 30h/year; mandatory CPD audit selection | Audit-mode exports + annual CPD report |
| **Civil engineers** | ICE | No minimum hours; varies by role/grade | Competence-based plans (not hour-driven) |
| **Financial advisers** | FCA | 35h/year; 21 structured for retail investment | Structured CPD catalogue + evidence vault |
| **Solicitors** | SRA | Continuing competence; annual declaration | Competence system (reflection -> plan -> evidence) |
| **Legal executives** | CILEX | 8h CPD + professionalism outcome | Hours tracking + professionalism outcome tagging |
| **Chartered accountants** | ICAEW | Category-based; verifiable + ethics | Category rules + verifiable evidence + ethics tag |
| **Accountants (global)** | ACCA | 40 units/year; 21 verifiable, 19 non-verifiable | Verifiable/non-verifiable workflow + evidence upload |
| **HR professionals** | CIPD | ~30h planned learning/year + impact | Plan + impact capture (not just certificates) |
| **Managers** | CMI | CPD records; chartered status evidence | Chartered-ready CPD record packs + sampling support |
| **Management accountants** | CIMA | Record of development activity | CPD log + development plan + export |

### Go-to-Market by Vertical

#### Health & Social Care
- **Wedge:** "Revalidation-ready CPD system setup"
- **Search themes:** "NMC revalidation CPD record template", "HCPC CPD audit profile example"
- **Partnerships:** trusts, unions, training providers

#### Engineers
- **Wedge:** "Engineering CPD audit-ready tracker setup"
- **Search themes:** "IET CPD audit", "Engineering Council CPD record template"
- **Partnerships:** employers, engineering consultancies

#### Financial Advisers
- **Wedge:** "Structured CPD plan + evidence vault in 24 hours"
- **Search themes:** "35 hours structured CPD", "Consumer Duty CPD"
- **Partnerships:** paraplanner communities, compliance consultancies

#### Legal Professionals
- **Wedge:** "Continuing competence system setup"
- **Search themes:** "SRA continuing competence template", "CILEX CPD requirements"
- **Partnerships:** training providers, practice management vendors

#### Chartered Professionals (Accounting, HR, Management)
- **Wedge:** "Verifiable CPD tracker + evidence vault setup" / "Impact-focused CPD plan setup"
- **Search themes:** "ICAEW verifiable CPD ethics", "ACCA 21 verifiable CPD units", "CIPD CPD 30 hours"
- **Partnerships:** firms, professional networks

### Domain Strategy for Multi-Vertical

Use an umbrella brand that isn't finance-coded:
- **Brand domain:** `CPDVault.com`, `AuditReadyCPD.com`, `CPDDesk.com`, `ProofReadyCPD.com`
- **Vertical paths** (best for SEO + authority): `/finance/`, `/health/`, `/engineering/`, `/legal/`, `/chartered/`

---

## Implementation Status

### What's Been Built

#### Infrastructure & Frontend
- [x] Next.js 16 + Tailwind CSS v4 webapp with Turbopack
- [x] FCA.org.uk-inspired professional theme (extensible CSS variable system via `@theme`)
- [x] Landing page with all conversion sections (Hero, TrustBar, WhatYouGet, WhoThisIsFor, HowItWorks, Pricing, FAQ, FinalCTA, Footer)
- [x] Onboarding questionnaire (4-step wizard: About You, Credentials, Preferences, Review)
- [x] Onboarding wizard wired to backend API (creates UserCredential records)
- [x] "Try Now" demo mode with feature flag (`NEXT_PUBLIC_DEMO_MODE`)
- [x] Feature flag system (`src/lib/features.ts`)

#### Auth + Billing
- [x] NextAuth.js v5 (JWT sessions, Credentials provider, PrismaAdapter)
- [x] Email/password signup + login
- [x] Stripe checkout integration (Tier 1 one-time $149, Tier 2 subscription $39/mo)
- [x] Stripe webhook handler (payment confirmation, subscription events)
- [x] Pricing CTAs wired to Stripe checkout (or signup redirect)

#### Requirements & Profile Engine
- [x] Prisma 7 schema with 12 models (User, Credential, UserCredential, CpdRecord, Evidence, OnboardingSubmission, Payment, Firm, etc.)
- [x] SQLite database with libsql adapter (dev) / PostgreSQL-ready (prod)
- [x] Credential database seeded with 14 real credentials across 6 regions:
  - US: CFP (30h/2yr, 2h ethics, 40h from 2027), FINRA Series, IAR (12h/yr, 6h ethics + 6h products)
  - UK: FCA Adviser (35h/yr, 21h structured), CII/PFS (35h/yr), CISI (35h/yr, 3.5h ethics)
  - AU: FASEA/ASIC (40h/yr, 4 knowledge areas)
  - CA: FP Canada CFP (25h/yr), FP Canada QAFP (12h/yr)
  - SG: MAS Licensed Rep (30h/yr, 6h ethics, 8h rules)
  - HK: SFC Licensed Rep (10h/yr, 5h approved courses, 2h ethics)
  - Health: NMC Nurse/Midwife (35h/3yr, 20h participatory)
  - Chartered: ACCA (40 units/yr, 21 verifiable), ICAEW (outcome-based)
- [x] Category constraint rules per credential (ethics, structured/unstructured, verifiable)
- [x] Multi-credential support (user can hold CFP + FCA Adviser etc.)
- [x] Onboarding wizard maps credential labels to DB records
- [x] "CPD Gap" calculator (required vs completed, by category)

#### Dashboard & Tracking
- [x] Real dashboard with live DB data (authenticated users)
- [x] Demo dashboard with mock data (unauthenticated / demo mode)
- [x] Stats grid: Hours Completed, Hours Remaining, Progress %, Certificates
- [x] CPD Gap Analysis with color-coded progress bars (total, ethics, structured)
- [x] Activity feed with status badges and category tags
- [x] Profile card, deadline countdown, quick actions sidebar
- [x] Log Activity modal with full form (title, hours, date, provider, type, category, notes)
- [x] CPD records API (GET list + POST create with validation)
- [x] Dashboard API (aggregates user data, credentials, progress, deadlines, activities)

#### Audit-Ready MVP
- [x] Evidence upload API (file storage + metadata + link to CPD records)
  - POST /api/evidence (FormData upload, 10MB limit, PDF/JPEG/PNG/WebP/Text)
  - GET /api/evidence (list with optional cpdRecordId filter)
  - GET /api/evidence/[id] (download file from disk)
  - DELETE /api/evidence/[id] (remove evidence record)
  - Auto-naming convention, user directory under `uploads/`
- [x] Audit report export (PDF + CSV)
  - GET /api/export/audit-report (multi-page A4 PDF: cover, summary, activity log, evidence inventory)
  - GET /api/export/audit-csv (standard CSV with all activity fields)
  - PDF generation library (`src/lib/pdf.ts`) with PDFKit
- [x] Compliance brief PDF (1-page summary)
  - GET /api/export/compliance-brief (credential details, progress bar, breakdown table, deadline warning)
- [x] Email reminder system with .ics calendar
  - GET/POST /api/reminders (CRUD with type/status/channel filtering)
  - GET/PATCH/DELETE /api/reminders/[id] (individual reminder management)
  - GET /api/reminders/ics (generate .ics calendar file with dual alarms)
  - Reminder model in Prisma schema (deadline, progress, custom types)

#### Certificate Engine + Quiz Mechanic (Sprint 1)
- [x] Certificate PDF generator with QR verification
  - POST /api/certificates (generate certificate with branded PDF, QR code, unique CERT-YYYY-xxxxxxxx code)
  - GET /api/certificates (list with search, filter, pagination)
  - GET /api/certificates/[id] (single certificate)
  - PATCH /api/certificates/[id] (revoke/reactivate)
  - GET /api/certificates/[id]/download (re-download PDF, regenerate if missing)
  - GET /api/certificates/verify/[code] (public verification endpoint, no auth required)
  - GET /api/certificates/export (CSV export of all certificates)
  - Firm branding support (custom colors, firm name on certificates)
  - QR code embedded via `qrcode` package
- [x] Quiz/assessment engine
  - GET/POST /api/quizzes (list available quizzes / create quiz with JSON question bank)
  - GET/DELETE /api/quizzes/[id] (get quiz with questions stripped of answers / deactivate)
  - POST /api/quizzes/[id]/attempt (submit answers, auto-grade, configurable pass mark + retries)
  - Auto-generate certificate + CPD record on quiz pass
  - Admin-only quiz creation (role gating)
- [x] Completion rules engine (`src/lib/completion.ts`)
  - GET /api/completion (check completion status for a CPD record)
  - POST /api/completion (trigger certificate generation when all rules pass)
  - 4 rule types: quiz_pass, evidence_upload, watch_time, attendance
  - Multi-rule AND logic (all rules must pass for certificate eligibility)
  - Auto-certificate generation on full completion
- [x] Prisma schema expanded: Certificate, Quiz, QuizAttempt, CompletionRule models

#### Content Model + Activity Catalog (Sprint 2)
- [x] Activity model with full content metadata
  - Activity schema: type, title, description, presenters, durationMinutes, learningObjectives, tags, jurisdictions, evidencePolicy, deliveryUrl, deliveryMeta, publishStatus, version, tenantId, createdBy, approvedBy
  - CreditMapping schema: creditUnit, creditAmount, creditCategory, structuredFlag, country, stateProvince, exclusions, validationMethod, credentialId
  - Soft-delete support (active flag), publish/draft workflow
- [x] Activity CRUD API
  - GET/POST /api/activities (list with filters: type, category, jurisdiction, search, status; create with credit mappings)
  - GET/PATCH/DELETE /api/activities/[id] (detail with user credit view, update fields, soft-delete)
  - POST /api/activities/[id]/publish (validate title + credit mappings, set publishedAt + approvedBy)
  - Role-aware: non-admins see published only, admins see all statuses
- [x] Multi-jurisdiction credit resolution
  - GET /api/activities/[id]/credits (resolve per user credential profile)
  - Country matching (exact + INTL fallback)
  - State exclusions via JSON (e.g., "not approved in NY, CA")
  - State inclusions via stateProvince JSON
  - Credential-specific mappings
- [x] Provider reporting dashboard
  - GET /api/provider/report (admin/firm_admin only)
  - Activity counts (total, published, draft), certificate stats, quiz pass rates
  - CPD hours issued by category, date range filtering
  - Tenant-scoped: firm_admins see their firm's data only
- [x] Prisma schema expanded: Activity, CreditMapping models (20 models total)
- [x] State helper: createPublishedActivity() (3 credit mappings: US, GB, AU)

#### Testing
- [x] Vitest integration test suite (167 tests covering all business features)
  - Credential database verification (all 14 credentials, rules, regions, verticals)
  - User signup flow (creation, validation, duplicate rejection, password rules)
  - Authentication gates (all 12 protected endpoints return 401)
  - State-setting test helpers (7 user states for QA)
  - Onboarding data creation and credential linking
  - CPD activity logging (structured, unstructured, verifiable, fractional hours)
  - Dashboard aggregation (total hours, ethics hours, structured hours, onboarding hours)
  - Gap analysis calculations (progress %, remaining hours, deadline, null handling)
  - Evidence management (CRUD, metadata, linking, file types)
  - Reminders business logic (CRUD, dismissal, filtering, JSON metadata)
  - PDF generation (compliance brief, audit report, CSV format + escaping)
  - Multi-credential support (independent tracking, primary credential)
  - Data integrity checks (foreign keys, JSON validity, cascade delete)
  - Page availability (all 5 pages load successfully)
  - Edge cases (zero hours, null deadlines, empty states, user isolation)
  - Credential-specific business rules (CFP 40h change, FCA 60% structured, IAR equal quotas)
  - Certificate generation (creation, unique codes, verification, revocation)
  - Certificate PDF (generation, QR code embedding, firm branding)
  - Quiz engine (creation, grading, pass/fail, retry tracking)
  - Completion rules (rule evaluation, multi-rule AND logic, auto-cert)
  - Certificate vault (list, search, ordering, export CSV)
  - Activity CRUD (creation, listing, filtering, publish workflow, soft-delete, versioning)
  - Credit mapping per jurisdiction (multi-country, INTL fallback, state exclusions/inclusions)
  - Provider reporting (aggregation, quiz pass rate, hours by category, date filtering)
  - Activity auth gates (all 7 new endpoints return 401 without auth)
- [x] Tests wired into production build (`npm run build` runs `vitest run` first)
- [x] State-setting test helpers (`src/__tests__/helpers/state.ts`) for QA and E2E

#### Project Infrastructure
- [x] Ralph project setup (PROMPT.md, fix_plan.md, AGENT.md, .ralphrc)
- [x] Agent instruction files (CLAUDE.md, CODEX.md, GEMINI.md)
- [x] Central README.md with full product spec

### What Needs to Be Built (by module)

#### A) Requirements & Profile Engine
- [x] Requirements database schema (SQLite dev / PostgreSQL prod)
  - [x] Credential table with category constraints per jurisdiction
  - [x] Renewal period / reporting cycle logic
  - [x] Ethics / structured / verifiable / participatory tagging rules
  - [x] Multi-credential support (user holds CFP + insurance)
- [x] Wizard backend API (save onboarding answers, generate plan)
- [x] "Your CPD Gap" calculator (required vs completed, by category)
- [x] Compliance brief PDF generation (1-page summary)
- [ ] Multi-vertical requirement rules (health, engineering, legal, chartered)

#### B) Done-for-You Setup
- [x] Account provisioning API (create user + dashboard)
- [ ] CPD plan generation engine (calendar + recommended courses)
- [x] Reminder system (email + .ics calendar invites)
- [ ] Audit binder folder structure (S3-based)
- [ ] "Your CPD system is live" onboarding email (Day 0)
- [ ] Onboarding email sequence (Day 2, Day 7, Day 21 upsell)

#### C) Course/Content Layer
- [ ] Content model (modules, webinars, articles with CPD metadata)
  - [ ] Learning objectives / outcomes fields
  - [ ] Duration / CPD minutes
  - [ ] Audience level tagging
  - [ ] Provider / accreditation body linkage
- [ ] Micro-module player (10-20 min video/text units)
- [ ] Live webinar scheduling + registration
- [x] Assessment engine (quiz mechanic to unlock certificates)
  - [x] Question bank per module (JSON question bank with multiple-choice, true/false)
  - [x] Pass threshold configuration (configurable pass mark per quiz)
  - [x] Retry logic (configurable max attempts per quiz)
- [x] Certificate generator (PDF: name, date, duration, outcomes, provider)
  - [x] Template system (branded per provider/accreditor, firm branding support)
  - [x] Auto-issue on quiz pass (via quiz attempt endpoint)
  - [ ] Manual issue for webinar attendance
- [ ] Content editorial calendar tooling
- [ ] Accreditation relationship management (CII, CISI, etc.)

#### D) Tracking + Evidence Vault
- [x] CPD activity CRUD API
  - [ ] Auto-log from platform modules
  - [x] Manual log for external activities
  - [ ] Bulk import (CSV)
- [x] Evidence upload (certificates, attendance records, reflections)
  - [x] Local file storage with auto-naming conventions
  - [ ] S3 storage with signed URLs (production)
  - [x] Metadata storage (JSON)
  - [ ] Metadata extraction (date, duration, learning outcome)
- [ ] Structured vs unstructured tagging (UK)
- [ ] Verifiable vs non-verifiable tagging (ACCA/ICAEW)
- [ ] Participatory vs non-participatory tagging (NMC)
- [ ] Reflection / peer discussion entry workflows (GPhC, SRA)
- [x] Audit report export (PDF + CSV)
  - [x] Multi-page PDF with activity log and evidence inventory
  - [x] CSV export with all activity fields
  - [ ] Credential-specific report templates
  - [ ] One-click export for all evidence
  - [ ] HCPC-style CPD profile builder

#### E) Reporting / Submission Support
- [x] Dashboard: real-time progress by category
- [x] Deadline countdown with escalation reminders
- [ ] Submission checklist (credential-specific steps)
- [ ] Quarterly compliance export (automated email to Managed tier)
- [ ] Annual CPD declaration support (pre-filled where possible)

#### F) Firm / Team Dashboard (B2B)
- [ ] Multi-tenancy (firm -> advisers)
- [ ] Seat management (invite, roles, deactivate)
- [ ] Compliance admin view (all advisers, filterable)
- [ ] Per-adviser audit report packs
- [ ] Policy templates + acknowledgment tracking
- [ ] Consolidated billing (Stripe per-seat)

#### G) Auth + Billing
- [x] Real auth (NextAuth.js v5)
  - [x] Email/password signup + login
  - [x] JWT session strategy
  - [ ] Magic link
  - [ ] SSO (for firm tier)
- [x] Stripe integration
  - [x] Tier 1: one-time payment ($149) checkout flow
  - [x] Tier 2: subscription ($39/mo) checkout flow
  - [ ] Tier 3: per-seat billing
  - [x] Checkout session creation API
  - [x] Success/failure redirect pages
  - [x] Webhook handler (payment confirmation, subscription cancellation, failed payments)
  - [ ] Customer portal (manage subscription)
- [x] Database schema (Prisma + SQLite dev / PostgreSQL prod)
  - [x] User, Account, Session, VerificationToken (auth)
  - [x] Credential, UserCredential (CPD requirements)
  - [x] CpdRecord, Evidence (tracking + vault)
  - [x] OnboardingSubmission (wizard data)
  - [x] Payment (Stripe integration)
  - [x] Firm, FirmAnalyticsExport (B2B + white-label)
  - [x] AnalyticsEvent (usage tracking)
- [x] API routes
  - [x] POST /api/auth/signup (create account)
  - [x] GET/POST /api/auth/[...nextauth] (NextAuth handlers)
  - [x] POST /api/onboarding (save wizard answers)
  - [x] POST /api/checkout (create Stripe session)
  - [x] POST /api/webhooks/stripe (handle Stripe events)
- [x] Frontend wiring
  - [x] Pricing CTAs trigger Stripe checkout (or redirect to signup if not authed)
  - [x] Nav shows auth state (sign in / sign out / dashboard / avatar)
  - [x] SessionProvider wrapping app layout

#### G2) White-Label Platform
- [ ] Firm white-label configuration
  - [ ] Custom brand name, logo, primary/secondary colours
  - [ ] Custom domain support with SSL provisioning
  - [ ] Branded login/signup pages
  - [ ] Toggle to hide AuditReadyCPD branding
- [ ] White-label certificate engine
  - [ ] Firm-branded certificate PDF templates
  - [ ] Certificate template builder UI
  - [ ] Co-branded certificates (firm + accreditation body)
  - [ ] Serial numbers with firm prefix
  - [ ] Bulk issuance for webinar attendance
- [ ] Firm API access
  - [ ] API key generation and management
  - [ ] REST API: read user progress, certificates, analytics
  - [ ] Webhook configuration (real-time events to firm systems)
  - [ ] Rate limiting and usage metering

#### G3) Usage Analytics
- [ ] Per-user analytics
  - [ ] Page views, time on page, scroll depth
  - [ ] Module engagement (start, pause, resume, complete)
  - [ ] Quiz tracking (attempts, scores, time per question)
  - [ ] Certificate and export events
  - [ ] Login/session metrics (frequency, duration, device)
  - [ ] Onboarding funnel (step completion, drop-off)
- [ ] Firm integration data sharing
  - [ ] Firm-specific tracking IDs (prefix-based, e.g. ZUR-00123)
  - [ ] Tracking ID assignment (auto/manual on registration)
  - [ ] Tracking ID lookup API
  - [ ] Real-time webhooks: registration, completion, certificate, hours logged
  - [ ] Batch data export API (daily/weekly aggregated)
  - [ ] SFTP/S3 data drop for firms without API capability
  - [ ] Configurable PII exposure per firm
  - [ ] GDPR data processing agreement support
- [ ] Analytics dashboard
  - [ ] Active users, completion rates, engagement metrics
  - [ ] CPD hours by category (structured/unstructured/ethics)
  - [ ] Module completion funnel
  - [ ] Deadline compliance view (on track / at risk / overdue)
  - [ ] Scheduled analytics email (daily/weekly/monthly)
  - [ ] CSV/PDF export

#### H) Crawler + Scripts
- [ ] Regulatory crawler framework (Puppeteer/Playwright)
  - [ ] CFP Board announcements
  - [ ] FCA regulatory updates
  - [ ] NASAA state IAR adoption tracker
  - [ ] NMC / GMC / GPhC / HCPC guidance changes
  - [ ] Engineering Council / IET updates
  - [ ] SRA / CILEX guidance changes
  - [ ] ICAEW / ACCA / CIPD / CMI / CIMA updates
- [ ] Content aggregation pipeline (approved course provider catalogue)
- [ ] Deadline calendar generator
- [ ] "State of CPD/CE" annual report generator
- [ ] CPD hours remaining calculator (embeddable widget)

#### I) Marketing / SEO Infrastructure
- [ ] SEO topic cluster pages per vertical
  - [ ] `/finance/cfp-ce/`
  - [ ] `/finance/iar-ce/`
  - [ ] `/finance/uk-adviser-cpd/`
  - [ ] `/health/nmc-revalidation/`
  - [ ] `/engineering/iet-cpd/`
  - [ ] `/legal/sra-competence/`
  - [ ] `/chartered/icaew-cpd/`
- [ ] 5 "answer pages" per vertical (high-intent search targets)
- [ ] robots.txt allowing OAI-SearchBot
- [ ] Schema markup (FAQ, Organization, Course, Event)
- [ ] Lead magnets (audit checklist PDF, CPD policy template)
- [ ] Google Ads conversion tracking
- [ ] Meta/Google retargeting pixel
- [ ] Email capture + nurture sequences

---

## Project Structure

```
continuing_professional_development/
├── README.md                  # This file  - central project plan
├── CLAUDE.md                  # Claude Code agent instructions
├── CODEX.md                   # Codex agent instructions
├── GEMINI.md                  # Gemini agent instructions
├── .ralph/                    # Ralph autonomous loop config
│   ├── PROMPT.md              # Development instructions
│   ├── fix_plan.md            # Prioritized task list
│   ├── AGENT.md               # Build/run instructions
│   ├── specs/                 # Detailed specifications
│   └── logs/                  # Execution logs
├── .ralph-tools/              # Ralph CLI (project-local install)
├── .ralphrc                   # Ralph project configuration
├── webapp/                    # Frontend (landing pages + dashboard)
├── backend/                   # API + auth + billing
├── crawler/                   # Data sourcing (regulatory content, courses)
└── scripts/                   # Independent analysis & content generation
```

---

## 12. Market Participant Analysis: AUS / CAN / USA

### Australia (FASEA/ASIC)

**Regulatory landscape:** Australian financial advisers must complete 40 hours CPD annually under the ASIC standards (formerly FASEA). Activities must span four knowledge areas: technical competence, client care, regulatory compliance, and professionalism/ethics. The market is underserved by purpose-built CPD tracking tools - most advisers use spreadsheets or licensee-provided portals with limited audit-readiness features.

**Key participants:**
- **Kaplan Professional** - dominant CPD provider for financial planners, accredited modules
- **ASIC / Treasury** - regulator publishing CPD standards and guidance
- **FPA (Financial Planning Association)** - industry body, CPD events and resources
- **Licensee groups** (AMP, IOOF, Insignia) - internal CPD tracking for their adviser networks

**Opportunity:** Independent advisers (growing rapidly post-Royal Commission) lack enterprise CPD tools. The 40h/year requirement with four mandatory knowledge areas creates genuine tracking complexity.

### Canada (FP Canada)

**Regulatory landscape:** FP Canada CFP certificants need 25 CE credits/year with at least 1 in Professional Responsibility. QAFP certificants need 12 credits/year. The market is fragmented across provinces with additional provincial licensing requirements on top of FP Canada.

**Key participants:**
- **FP Canada** - certification body, publishes CE requirements
- **CSI (Canadian Securities Institute)** - major CE provider
- **IFSE Institute** - CE courses for investment fund industry
- **Provincial regulators** (OSC, AMF, BCSC) - additional licensing CE

**Opportunity:** The dual-credential complexity (national FP Canada + provincial securities licensing) creates confusion. A unified tracker covering both would be highly valued.

### United States (CFP Board / NASAA / FINRA)

**Regulatory landscape:** The US market has three overlapping CE frameworks:
1. **CFP Board**: 30h per 2-year cycle (increasing to 40h from Q1 2027), 2h ethics
2. **NASAA (IAR)**: 12h/year (6h ethics + 6h products), state-by-state adoption
3. **FINRA**: Regulatory Element (content-based, annual) + Firm Element (firm-defined)

**Key participants:**
- **CFP Board** - certification body, CE requirements and approved provider directory
- **Kitces.com** - dominant CE content provider for financial planners
- **Morningstar** - CE webinars and on-demand content
- **NASAA** - IAR CE requirements, state adoption tracking
- **Kaplan Financial Education** - CE courses across credentials
- **CFFP / National Endowment** - CE events and conferences

**Opportunity:** The CFP 40-hour increase (Q1 2027) is the largest addressable "hype wave" - every CFP needs 33% more CE hours. Combined with the IAR state-by-state rollout creating confusion about which states require what, the US market has the highest intent search volume and the most confusion to resolve.

### Compliance Substrate (Cross-Market)

All three markets share common compliance infrastructure needs:
- **Evidence vault** with naming conventions, metadata, and export-ready reports
- **Category tagging** (ethics, structured/unstructured, verifiable/non-verifiable)
- **Deadline management** with escalation reminders
- **Audit-ready exports** in credential-specific formats
- **Multi-credential support** (many advisers hold 2-3 overlapping credentials)

The AuditReadyCPD platform addresses all of these with a unified data model that maps credential-specific rules to a common tracking and reporting interface.

---

## 13. Market Participant CPD Research: What Providers Actually Do

### Financial Services CPD from Market Participants (Insurers, Platforms, Asset Managers)

These organisations use CPD as (a) adviser education and (b) lead-gen / relationship marketing. The patterns are consistent across the industry:

| Provider | Model | Key Pattern |
|----------|-------|-------------|
| **Aviva** | Webinar hub with CPD minutes + "watch now" on-demand | Interactive Q&A sessions; links to technical articles for more CPD |
| **Legal & General** | CPD Academy with CII-accredited webinars/workshops | Table format: title, CPD mins, link |
| **Zurich** | Gated "Learning Hub" with on-demand + bite-sized resources | Automatic certificate creation + storage in personal CPD file; watch-time/quiz criteria; Okta/Unipass identity |
| **Royal London** | Mandated e-learning + self-directed learning mix | Automatic tracking for mandatory; flexible logging for self-directed; references FCA CPD expectations |
| **abrdn** | Accredited modules completable in parts | Certificate emailed after completing questions |
| **M&G** | Structured CPD sessions (CISI + CII accredited) | "Send certificate" workflow including reflective statements |
| **Quilter Cheviot** | "Watch + questionnaire + request certificate" model | Certificate sent after completing survey |
| **Canada Life** | Live webinars + on-demand with personalised certificates | Structured CPD certificates + encouragement to self-log unstructured activity |
| **Aegon** | "Watch content + answer questions" model | CPD certificate on quiz completion |
| **Scottish Widows** | Expert series on YouTube | "Request CPD certificate" pattern with stated learning objectives |
| **LV=** | Webinar calendar | Certificate received after sessions |
| **Morningstar** | Complete quiz per webinar, certificate emailed | Learning objectives + CPD credit hours per listing; access gated via lead form |

**Best-in-class:** The more mature implementations behave like mini-learning platforms with automatic tracking + certificate vault + clear completion criteria (e.g., Zurich).

**Common gap even in good ones:** Fragmentation - the webinar might be ON24/Zoom/YouTube, the certificate somewhere else, and the user's real CPD record still lives in yet another system/spreadsheet.

### AUS, CAN, USA Provider Examples

| Provider | Region | Model | Notable Feature |
|----------|--------|-------|-----------------|
| **TAL** | AU | 40+ on-demand courses, FAAA-accredited | Built-in CPD tracker, mobile access, tests/results, course certificates |
| **Macquarie Group** | AU | On-demand webinar catalogue (YouTube + live registration) | Education content but not "CPD-native" without tracking/certification wrapper |
| **Financial Education Professionals** | AU | LMS/productised approach with tracking/reporting | Short-course assessment via online MCQ exam; fulfilment friction (orders processed, login sent later) |
| **Sun Life** | CA | CE webinar series with mandatory quizzes | Up to 2 CE credits per session; credits available even via recordings (with quiz completion) |
| **Nationwide** | US | Webinars granting state insurance + designation credit | State complexity: approvals vary by state (e.g., "not approved in NJ, OK, VA, WA") |

### Professional-Body / Profession-Led CPD Tracking

A key structural fact across industries: content is decentralised, but the burden of proof sits with the professional (and/or their employer), often with audit risk.

| Organisation | Pattern |
|-------------|---------|
| **IET (Engineering)** | "Career Manager" to plan/record/declare CPD; members may be asked to provide proof annually |
| **Engineers Australia** | Portal to record CPD |
| **SRA (Solicitors)** | Templates to record learning/development; may require evidence through training record reviews |
| **AICPA & CIMA** | "My Learning Tracker" pattern for CPE (certificates + transcripts) |
| **BMJ (Healthcare)** | Dashboard keeping record of activity; download certificates |
| **AMA (American Medical)** | Transcript app to access transcripts/certificates; removes manual admin |
| **RACP (Royal Australasian College of Physicians)** | MyCPD platform for recording activities and tracking progress |
| **CPD Home** | Automatic tracking for subscribers; catalogue + option to host accredited activities or link to provider platforms |

---

## 14. Common Building Blocks and Provider Spend Analysis

### Universal Functional Building Blocks

Nearly every provider implements these components:

1. **Catalogue of activities** (webinars, modules, articles)
2. **Completion criteria** (watch-time, attendance, quiz, reflection)
3. **Certificate issuance** (PDF/email/download)
4. **Transcript / CPD log** (often manual, sometimes inside the provider platform)
5. **Accreditation metadata** (learning objectives, hours/points, category)
6. **Identity + access control** (sometimes strict "professionals only")
7. **Analytics + marketing** (registration, attendance, conversion)

### Where Providers Spend Money Today

Provider spend falls into five buckets:

| Bucket | What It Covers |
|--------|---------------|
| **Content production & SMEs** | Presenter time, policy/technical authors, slide design, editing, post-production |
| **Accreditation + compliance ops** | Staff time to prepare submissions, track approvals/expiry, store evidence, handle audit queries |
| **Delivery tooling** | Webinar platforms (attendance reporting), video hosting, quizzes/surveys, certificate generation, email automation |
| **Web/LMS engineering** | Maintaining multiple microsites, content pages, tables, search/tagging, login/SSO, data retention |
| **Support + admin** | "Where's my certificate?", login problems, manual certificate fulfilment, spreadsheet tracking |

### What Providers Want to Centralise (Without Losing Their Brand)

- Course creation templates + metadata
- Quizzes/reflection + completion rules
- Certificates + transcript storage
- Jurisdiction rules (hours/points/categories/state approvals)
- Reporting (for audits, internal compliance, sponsor ROI)
- Integrations (CRM + webinar + identity)

---

## 15. Observable Gaps and Improvement Opportunities

### For the Learner (Time-Saving)

1. **One CPD wallet, not 12:** certificates are emailed, stored in random portals, or must be requested manually
2. **Search and filtering that respects real constraints:** by jurisdiction, structured vs unstructured, ethics vs technical, time available (15/30/60 mins)
3. **Remove repetitive forms:** many providers gate every asset separately
4. **Portable transcript:** professionals need exportable evidence packs for audits

### For the Provider (Maintenance + Cost-Saving)

1. **Stop running CPD on spreadsheets + SurveyMonkey + inbox rules** - operationally expensive and fragile
2. **Automate credit eligibility logic** - watch-time/quiz thresholds, state/province restrictions, structured/unstructured rules; US state-by-state approvals are the clearest case
3. **Reduce platform sprawl** - ON24/Zoom/GoToWebinar + YouTube/Vimeo + LMS + website CMS + CRM + certificate tool = expensive integrations and unclear attribution
4. **Make accreditation reusable** - learning objectives, templates, assessment types, and evidence outputs are highly repeatable yet most organisations recreate them each time

---

## 16. Platform Unification Architecture

The winning architecture is **multi-tenant + modular**:

### A) Provider Console (White-Label CPD/CE "Ops")

**Core modules:**

| Module | Function |
|--------|----------|
| **Course builder** | Templates for webinar, e-learning, article, podcast |
| **Accreditation pack generator** | Learning objectives, competency mapping, assessment plan, evidence artifacts |
| **Completion rules engine** | Watch-time, quiz pass mark, reflection required, attendance roll-call |
| **Certificate engine** | Branded PDFs + verifiable IDs/QR codes + re-download forever |
| **Content ingestion** | Connect ON24/Zoom/GoToWebinar/YouTube/Vimeo + upload SCORM/xAPI |
| **Reporting** | Completions, drop-off, credit issued, audit trails, export for compliance |
| **CRM integration** | Push registration/completion events to Salesforce/HubSpot/Marketo |
| **Support minimisation** | Self-serve certificate retrieval + "why didn't I qualify?" explanations based on rules |

**Why providers keep maximum benefit:** They still get brand, first-party data, lead capture, topic ownership, compliance oversight, analytics. The platform removes tool sprawl, manual fulfilment, bespoke dev and brittle workflows.

### B) Learner Wallet

- Single transcript across all participating providers
- Auto-log CPD/CE from completions
- Evidence vault (certificates, reflections, attendance records)
- Rule-aware progress tracker (per profession + per country + per state/province)
- Export pack for audits / renewals / employer compliance

### C) Rules Engine ("Compliance Packs" per Profession & Jurisdiction)

Requirements packaged as configurable logic, not custom code:

| Profession | Key Rules |
|-----------|-----------|
| **Financial advisers** | Hours, structured/unstructured, ethics categories, evidence retention |
| **Health** | Credit types, cycle dates, accredited providers, certificates/transcripts |
| **Engineers** | Audit readiness, CPD record formats, evidence uploads |
| **Legal** | Reflection templates + record reviews + evidence on request |
| **Chartered/accounting** | CPE hour totals, transcript downloads, certificate retention |
| **US-specific** | Each state as a ruleset (approval lists, exemptions, course IDs, reporting formats) |

---

## 17. USPs to Win Over Existing CPD/CE Providers

Positioned to hit **maintenance cost, time, and risk** (the three levers providers feel immediately):

| # | USP | What It Replaces |
|---|-----|-----------------|
| 1 | **Replace 6 tools with 1 CPD operating system** | Unify webinar delivery, quizzes, certificates, transcripts, reporting, and catalogue management (still letting them keep Zoom/ON24/YouTube if they want) |
| 2 | **Instant certificates + zero "where's my cert" tickets** | Automatic issuance + permanent re-download in a branded portal; eliminates manual request flows |
| 3 | **Jurisdiction-aware CE automation** | One course configured once, then issued correctly for UK CPD / AU CPD / CA CE / US state-by-state; this is where pricing power lives because it's hard and expensive to do internally |
| 4 | **Audit-proof evidence vault** | Store completion criteria, timestamps, quiz results, reflection statements, certificates, and exportable packs; aligns with how engineering and legal regulators talk about records and evidence |
| 5 | **Accreditation submission packs in 1 click** | Templates for learning objectives, assessment methods, evidence outputs, renewal reminders, and expiry tracking |
| 6 | **White-label by default, marketplace optional** | Default: provider keeps their own branded academy. Optional: list content into shared catalogue for incremental learner acquisition |
| 7 | **Content ingestion, not content migration** | Connect to existing libraries (ON24 recordings, YouTube playlists, LMS modules) and wrap with CPD logic + certification without re-hosting |
| 8 | **Better economics than paid search** | Discovery layer + SEO-ready public course pages lower cost-per-registration over time |

---

## 18. Domain Recommendation (Brand + Cross-Country Clarity)

### Requirements

The name must work across terminology:
- UK/AU: "CPD"
- US/CA: "CE" / "CPE"
- Everyone: "credits", "transcript", "certificate", "wallet", "record"

**Criteria:** Prefer .com, 2-3 syllables max, spellable over the phone, avoid narrow vertical terms, avoid "academy" (overused), should work if expanding beyond CPD/CE.

### Expanded Shortlist

| Domain | Positioning |
|--------|------------|
| **CreditVault.com** (or CredVault.com) | Secure storage of credits + proof |
| **MyCPDWallet.com** / **CPDWallet.com** | Extremely literal (strong early-stage) |
| **CECompass.com** | "Find the right CE fast" |
| **TranscriptHub.com** | Aligns with what professionals actually need |
| **CertRecord.com** | Certificates + records (simple and cross-vertical) |
| **ProCredits.com** | Broad, professional |
| **LearnLedger.com** | "Ledger" evokes auditability (good for regulated professions) |

### Recommendation

**CreditVault** is the strongest cross-country umbrella because it doesn't force CPD vs CE wording, but still signals the job-to-be-done (store and prove credits).

If leaning provider-first ("platform/academy" positioning): **AuditReadyCPD.com** remains strong.
If leaning learner-first ("wallet/transcript" positioning): **CreditVault.com** or **CPDWallet.com**.

---

## 19. Browser Plugin: CPD Wallet for Financial Advisers

The browser plugin is how you turn fragmented CPD into a single, low-friction ledger for advisers, without waiting for every provider to integrate on day one.

### 19.1 Product Job-To-Be-Done

**"Wherever I earn CPD/CE, capture it automatically, store the proof, and keep me audit-ready."**

#### Core Wallet Functions

1. Capture CPD activity across the web (webinars, videos, articles, PDFs)
2. Classify it against adviser rules (structured/unstructured, category tags)
3. Store evidence (certificates, screenshots, reflection notes)
4. Show progress to requirements (per profile)
5. Export an audit pack

#### Non-Goals

- The plugin must not "fake" CPD (no auto-complete without user action)
- The plugin must not exfiltrate sensitive client data (financial advisers will have client portals open)
- The plugin should not try to break platform ToS (avoid scraping behind auth without consent)

### 19.2 Browser Extension Constraints (Manifest V3)

Built on **Manifest V3** (service worker background). MV2 has been phased out across Chrome channels. [Chrome for Developers](https://developer.chrome.com/docs/extensions/develop/migrate/mv2-deprecation-timeline)

Architecture implications:

- Background logic runs in a service worker (not persistent)
- Event-driven design required (wake on tab events, messages, alarms)

### 19.3 User Flows (detailed)

#### Flow A: Manual Quick-Capture (works everywhere; MVP)

Adviser clicks extension icon -> "Log CPD". Picks: activity type (webinar / video / article / meeting / reading), minutes (timer or manual), structured/unstructured, category (ethics/technical/etc.). Attaches evidence: upload PDF, capture screenshot, paste URL. Saves.

**Why it matters:** makes the wallet valuable even before integrations.

**Implementation:** Popup UI + "Start timer" button. On save: create ledger entry in wallet backend + local cache. Optionally prompt for reflection notes.

#### Flow B: Auto-Detect + Guided Capture (where most value is)

Adviser opens a known CPD page (provider webinar page, on-demand video page, article page). Extension shows a small unobtrusive banner: "This looks like CPD. Track it?" One click: "Start tracking".

**Tracking:** track time on page + video play state (where possible). Track completion: hits 80% watch OR user clicks "Mark complete" with attestation.

**On completion:** extension prompts: "Add category + structured/unstructured", "Upload certificate" (or auto-detect download), "Add reflection (optional)". Saves to wallet.

**Critical trust feature:** show the evidence basis: "Tracked 52:13 watched, 5:02 paused", "Quiz completed: yes/no", "Certificate attached: yes/no".

#### Flow C: Certificate Auto-Capture

Certificates are frequently downloaded as PDFs, opened in a new tab, or emailed.

**In-browser capture:** detect PDF downloads (downloads API). If filename matches patterns ("certificate", "CPD", "CE"), prompt: "Save to wallet?" Parse PDF text to pre-fill fields (title/date/minutes/provider when available).

**Limitation:** not all PDFs have extractable text; allow manual correction.

#### Flow D: Provider-Integrated "Instant Log" (best UX)

For providers integrated to your platform: provider portal emits a "completion event" to the extension, extension silently logs it to wallet and stores certificate pointer.

**How:** Provider site includes a tiny JS snippet: `window.postMessage({type:"CPD_COMPLETED", payload:{...}})`. Extension content script listens for that message on whitelisted domains. Saves record with high confidence. This is the cleanest way to avoid fragile scraping.

### 19.4 Detection Engine

#### The Detection Stack (layered)

1. **Domain allowlist** (highest confidence) - insurer / platform / CPD provider domains
2. **Metadata signals** - JSON-LD fields (Course/Event where present), "learning objectives", "CPD", "CE credits", "certificate"
3. **Page structure signals** - embedded webinar player / registration forms, known webinar platform markers
4. **User confirmation** - never auto-log without user confirmation unless in provider-integrated mode

Financial advisers browse client-related systems. You must reduce privacy risk by requiring explicit "Track this as CPD" action.

### 19.5 Video/Watch-Time Tracking: What's Possible

The YouTube API doesn't provide "how long a specific user watched a video." [Issue Tracker](https://issuetracker.google.com/issues/401460260). So you cannot rely on platform APIs for personal watch time.

**Practical approach:**

- For native HTML5 video (hosted by provider): track play/pause/timeupdate events
- For embedded players: use in-page instrumentation where possible (postMessage / player APIs), if tracking isn't reliable, fall back to: timer + attestation, optional quiz/reflection prompt

### 19.6 Extension Technical Architecture (MV3)

#### Components

**1. Service worker (background)** - Handles: auth token refresh, download detection, alarms (reminders), message routing between tabs and backend.

**2. Content scripts** - Injected on: allowlisted CPD domains, user-activated "track this page" mode. Responsible for: reading metadata, tracking page/video activity, showing in-page banner UI.

**3. UI surfaces** - Popup: quick actions ("Start tracking", "Log manually", "Upload certificate"). Side panel (recommended): transcript view, progress dashboard, "export pack".

**4. Local storage** - Minimal local cache for offline usage: queued CPD entries, unsynced evidence metadata. Encrypt sensitive cache at rest.

**5. Wallet backend API** - Stores: ledger entries, evidence artifacts (or pointers), rule pack progress.

#### Authentication

- OAuth/OIDC flow launched from extension
- Store access token + refresh token in extension storage (encrypted)
- Support "firm-managed" accounts later (SSO)

#### Permissions (least privilege)

- `storage` (local cache)
- `activeTab` (only interact with current tab)
- `downloads` (capture certificate PDFs)
- `notifications` (reminders / "certificate saved")
- Avoid blanket `tabs` permission unless truly needed

### 19.7 Wallet Data Model (extension <-> backend)

#### Key Entities

- `User`
- `CredentialProfile` - jurisdiction (UK/AUS/CAN/US), requirement pack version
- `CPDEntry` - source_url, provider_name, activity_type, minutes, category tags, structured_flag, captured_evidence_level (none | url | timer | video_tracked | certificate | provider_verified), timestamps
- `EvidenceArtifact` - pdf, screenshot, link, reflection notes, hash checksum
- `AuditPack` - generated ZIP/PDF bundle

#### Confidence Scoring

Compute an internal confidence score per entry:

| Score | Evidence Level |
|-------|---------------|
| 0.2 | Manual log only |
| 0.5 | Tracked time + URL |
| 0.8 | Certificate attached |
| 1.0 | Provider-verified completion event |

Helps the adviser and the firm see what's "audit strong."

### 19.8 Firm Deployment Model

Advisers often operate under a compliance function. Add:

- "Firm workspace" where: staff can view aggregated CPD status, request audit packs, set internal policies (e.g., "ethics must be certificate-backed")
- Chrome Enterprise deployment policies (managed installation)
- Configure: allowed domains list, whether local storage allowed, whether screenshots allowed, whether export is enabled

### 19.9 Plugin Implementation Epics

#### Epic 1: MV3 Skeleton + Secure Auth

- MV3 extension scaffold (service worker + popup)
- OAuth login, token refresh + logout
- Basic backend endpoints
- **Acceptance:** user can log in/out, tokens rotate correctly, no sensitive data stored unencrypted

#### Epic 2: Manual CPD Logging + Evidence Upload

- "Log CPD" form, timer mode
- Evidence upload (PDF)
- Transcript list + basic export (CSV)
- **Acceptance:** adviser can log 10 entries reliably, uploads persist, re-downloadable, export matches displayed ledger

#### Epic 3: Domain Allowlist + Detection Banner

- Allowlist configuration
- Metadata extraction (title, duration, keywords)
- In-page banner: "Track CPD?"
- **Acceptance:** banner appears only on allowlisted domains, user opt-in required, no performance degradation

#### Epic 4: Watch-Time Tracking (HTML5 + best-effort embeds)

- Track play/pause/timeupdate
- Heartbeat validation
- Fallback to timer/attestation when uncertain
- **Acceptance:** accurate tracked minutes within tolerance, clear user-facing explanation of what was tracked

#### Epic 5: Certificate Auto-Capture

- Detect PDF download events
- Prompt to save to wallet
- PDF text extraction + pre-fill fields (editable)
- **Acceptance:** works for typical certificate PDFs, user can override parsed fields

#### Epic 6: Provider-Verified Completion Events

- Provider JS snippet spec
- postMessage listener (domain-scoped)
- High-confidence auto-log entries
- **Acceptance:** completion event creates entry without manual typing, duplicate prevention (idempotency key)

#### Epic 7: Rule-Aware Progress Dashboard

- Profile setup (UK/AUS/CAN/US)
- Progress dashboard (total hours, structured hours, category splits)
- "What should I do next?" recommendations
- **Acceptance:** entries roll up correctly per rule pack, export audit pack matches rule pack expectations

### 19.10 How Plugin and Provider Platform Reinforce Each Other

The real moat is the loop:

- Providers use your platform to **issue credits + certificates** with minimal ops
- Advisers use the plugin wallet to **collect and unify** CPD across providers
- That makes providers more valuable if they integrate (their CPD becomes "one-click wallet compatible")
- Over time, providers adopt your completion event snippet and stop building bespoke certificate flows

### Shared Codebase Strategy

```
continuing_professional_development/
  webapp/              # Next.js webapp (existing)
  plugin/              # Browser extension (new)
  shared/              # Shared code between webapp and plugin
    src/
      types/           # TypeScript interfaces (credentials, records, evidence)
      rules/           # Credential rules engine (extracted from webapp)
      theme/           # Design tokens, colour palette, typography
      api-client/      # Typed API client for backend endpoints
      utils/           # Shared utilities (hours calc, gap analysis, date helpers)
    tests/             # Cross-project business logic tests
```

### Shared Test Strategy

```
shared/tests/
  business-rules.test.ts    # Credential rules, gap analysis, hours calc
  api-contract.test.ts      # API request/response shape validation
  theme.test.ts             # Design token consistency checks

webapp/src/__tests__/
  business-features.test.ts # 167 tests (webapp integration)

plugin/tests/
  popup.test.ts             # Extension popup UI tests
  content-script.test.ts    # Content script detection tests
  background.test.ts        # Service worker / background script tests
  integration.test.ts       # Plugin-to-backend integration tests
```

All three test suites share the same credential rules, API contract shapes, and business logic assertions.

### Backend Sharing

The plugin authenticates via the same NextAuth.js session (cookie-based for same-origin, or JWT token for cross-origin). API endpoints are shared:

- `GET /api/dashboard` - progress data for sidebar
- `POST /api/cpd-records` - log activity from provider page
- `POST /api/evidence` - upload captured certificate
- `GET /api/certificates` - certificate vault for transcript view
- `GET /api/reminders` - badge count data
- `GET /api/export/compliance-brief` - quick PDF download
- `GET /api/completion` - check completion rules status

---

## 20. Feature Sprint Roadmap

### Sprint 1: Certificate Engine + Quiz Mechanic - COMPLETE

All items implemented and tested (167 tests passing):

| Feature | Status | Implementation |
|---------|--------|---------------|
| **Certificate PDF generator** (branded, with QR verification) | Done | `POST /api/certificates`, `GET /api/certificates/verify/[code]`, QR via `qrcode` package |
| **Quiz/assessment engine** (configurable pass marks, retry logic) | Done | `POST /api/quizzes/[id]/attempt`, auto-grade, JSON question banks |
| **Completion rules engine** (watch-time, quiz pass, attendance) | Done | `src/lib/completion.ts`, 4 rule types, multi-rule AND logic |
| **Certificate vault** (permanent re-download, search, export) | Done | `GET /api/certificates` (list/search/filter), `GET /api/certificates/export` (CSV) |

### Sprint 2: Content Model + Activity Catalog - COMPLETE

All items implemented and tested (167 tests passing):

| Feature | Status | Implementation |
|---------|--------|---------------|
| **Activity model** (Activity + CreditMapping schemas) | Done | `prisma/schema.prisma`: Activity (20+ fields) + CreditMapping models |
| **Activity CRUD API** (create, list, get, update, publish/unpublish, soft-delete) | Done | `GET/POST /api/activities`, `GET/PATCH/DELETE /api/activities/[id]`, `POST /api/activities/[id]/publish` |
| **Credit mapping per jurisdiction** (multi-jurisdiction credit views) | Done | `GET /api/activities/[id]/credits` - resolves per user credential profile, handles country/INTL matching, state exclusions/inclusions |
| **Activity tagging taxonomy** (topics, level, jurisdiction, category) | Done | JSON fields: tags, jurisdictions, learningObjectives, presenters; type enum; filter by type/category/jurisdiction/search |
| **External content linking** (deliveryUrl + deliveryMeta) | Done | Activity model supports deliveryUrl and deliveryMeta JSON for wrapping external content |
| **Provider reporting** (completion + certificate + quiz stats) | Done | `GET /api/provider/report` - activity counts, certificate stats, quiz pass rates, hours by category, date range filtering, tenant scoping |
| **Provider admin role gating** (admin, firm_admin) | Done | All write endpoints gated to admin/firm_admin roles; firm_admin sees tenant-scoped data only |
| **Activity publish workflow** (validation, approver tracking) | Done | Must have title + at least one credit mapping; sets publishedAt + approvedBy; non-admins see published only |

### Sprint 3: US State-by-State Automation (NEXT)

| Feature | Priority | Rationale |
|---------|----------|-----------|
| **State approval ruleset engine** | P0 | Nationwide's "not approved in NJ, OK, VA, WA" problem; highest pricing power |
| **Per-state certificate eligibility** | P0 | Automate at registration and certificate time |
| **NASAA IAR state adoption tracker** | P1 | Rolling state adoption creates ongoing confusion |
| **Multi-state CE credit display** | P1 | Show which states a course is approved for |

### Sprint 4: Tenant Provisioning + White-Label

| Feature | Priority | Rationale |
|---------|----------|-----------|
| **Tenant service** (creation, config, feature flags, domain mapping) | P0 | Multi-tenant foundation from Section 21.2 |
| **White-label portal theming** (per-tenant branding tokens) | P0 | Providers keep their brand |
| **Tenant-scoped data isolation** | P0 | Non-functional requirement; must be demonstrably correct |
| **Provider onboarding wizard** (guided setup for new provider tenants) | P1 | Repeatable provisioning from Section 21.4 |

### Sprint 5: Browser Plugin MVP

| Feature | Priority | Rationale |
|---------|----------|-----------|
| **Shared package extraction** (types, rules, theme, API client) | P0 | Foundation for code sharing |
| **Chrome extension scaffold** (MV3, popup, content script, service worker) | P0 | Basic plugin structure per Section 19.6 |
| **Manual CPD logging** (quick-capture from popup) | P0 | Epic 2 from Section 19.9; valuable immediately |
| **Progress sidebar popup** | P1 | Core user value: see progress without navigating away |
| **Domain allowlist + detection banner** | P1 | Epic 3; guided capture on provider pages |
| **Certificate auto-capture** (PDF download detection) | P2 | Epic 5; auto-evidence collection |

---

## 21. Provider Integration Implementation Blueprint

A complete implementation plan for integrating CPD/CE providers into the platform. Covers end-to-end: identity, content ingestion, attendance, certificates, transcripts, CRM, analytics, and ops.

### 21.0 Define "Integration Success" Before Any Code

#### Integration Outcomes (must be true on Day 1)

**Learner outcomes**

- A learner can discover activities, register/consume, and automatically receive: completion record, certificate/evidence, credit mapping (structured/unstructured, category tags, jurisdiction applicability)
- A learner can export an "audit pack" at any time

**Provider outcomes**

- Provider staff can publish new CPD content without engineers
- Provider staff can see registration + attendance + completion + certificate issuance reporting
- Provider staff can run compliance-grade exports (audit trail) on demand
- Provider keeps their brand + audience relationship

**Platform outcomes**

- Reliable, provable completion events ("credit issuance ledger")
- Scale to many providers without one-off code

#### Non-Functional Success Criteria

- Tenant data isolation is demonstrably correct
- Certificate and transcript data are immutable once issued (append-only model)
- Evidence artifacts have retention policies and secure access controls
- Systems remain usable during webinar peaks (thundering herds)
- Integrations recover gracefully from API throttling and delays

### 21.1 Integration Modes (3 lanes)

Providers have legacy stacks and internal politics. Offer three integration "lanes":

#### Lane A: Hosted Academy (maximum standardisation)

Host the provider's CPD portal (white-labeled). Your catalogue pages, your player, your quiz engine, your certificates, your transcript. Provider connects identity + branding + (optional) webinar platform.

**Best for:** providers with weak or messy current CPD experiences; small teams; high support burden.

#### Lane B: BYO Delivery, Your CPD Layer (most common; fastest)

Provider keeps their webinar/video hosting and possibly their website pages. You provide: registration/identity linking, completion verification, quiz/reflection (optional), certificate issuance + vault, transcript/wallet + exports.

**Best for:** insurers/platforms/asset managers with existing webinar operations.

#### Lane C: Data Federation (minimum intrusion)

Provider stays on their current LMS/webinar stack. They push completion and certificate issuance events to your platform via API/webhooks.

**Best for:** large orgs that won't change UX but want to outsource wallet/transcript, rules, and audit packs.

**Key design choice:** implement Lane A and B as first-class, Lane C as API-only.

### 21.2 Reference Architecture (multi-tenant provider portals + global wallet)

#### Core Components

| # | Service | Purpose |
|---|---------|---------|
| 1 | **Tenant Service** | Tenant creation, config, feature flags, domain mapping, branding assets, email templates, legal text per tenant |
| 2 | **Identity & Consent Service** | OIDC/SAML (and magic link), consent capture (privacy, data sharing to wallet), account linking across tenants |
| 3 | **Content & Activity Service** | Activity catalog (webinar, on-demand, article, bundle), tagging taxonomy, versioning |
| 4 | **Registration & Attendance Service** | Registration forms / lead capture, webinar platform connectors (attendance import), attendance rules evaluation |
| 5 | **Assessment Service** | Quiz, polls, reflection prompts, pass/fail, attempts, remediation |
| 6 | **Credit & Rules Engine** | Credit issuance logic, jurisdiction mapping, structured vs unstructured, state/province restriction logic |
| 7 | **Certificate & Evidence Service** | Template engine (HTML to PDF), certificate signing/verification ID + QR, evidence artifact storage + access controls |
| 8 | **Wallet / Transcript Service** | Unified transcript ledger (across providers), audit pack builder (PDF transcript + ZIP evidence) |
| 9 | **Provider Reporting & Analytics** | Attendance funnels, completion rates, content performance, exports (CSV, API, scheduled) |
| 10 | **Integration Hub** | OAuth credential vault, webhooks in/out, backfill jobs, retry queues, dead letter handling |

#### Data Stores

- OLTP: Postgres (multi-tenant)
- Search: OpenSearch / Elasticsearch (catalog search)
- Objects: S3-compatible for PDFs, ZIP audit packs
- Event bus: Kafka/PubSub/SQS + SNS (for integration resiliency)
- Analytics: warehouse (Snowflake/BigQuery) + dbt-style transforms

#### Security Primitives

- Per-tenant encryption keys (KMS)
- PII minimisation (especially for cross-provider wallet)
- Immutable audit log (append-only table + hashing chain per learner optional)

### 21.3 Provider Onboarding: Governance + Security + Data Mapping

#### Provider Onboarding Package (what you ask for)

- Brand assets (logo, colors, typography, legal footer)
- CPD/CE policy position: what they consider "structured/verifiable", completion thresholds (e.g., 80% watch + quiz pass), certificate language and disclaimers
- Jurisdictions they care about (UK / AUS / CAN / USA)
- Identity model: adviser-only verification? SSO to corporate IdP?
- Current delivery stack: webinar platform(s), video hosting, LMS (if any), CRM/marketing automation
- Existing content inventory: titles, descriptions, durations, learning objectives, certificate templates
- Reporting needs: export fields, compliance retention requirements
- Privacy constraints: data residency, DPA requirements, whether they allow sharing learner completion into a third-party wallet

#### Privacy Modes

**Mode 1: Tenant-only transcript** - Learner transcript lives inside the provider tenant.

**Mode 2: Global wallet (cross-provider)** - Learner explicitly opts into a global wallet. Store: minimal identity (email hash + optional verified email), completion ledger entries, evidence artifacts (or pointers if provider forbids external storage).

**Critical:** make Mode 1 usable on its own. Global wallet becomes a value-add when providers accept it.

### 21.4 Tenant Provisioning (repeatable, automated)

#### Tenant Creation Workflow

- Create tenant record
- Allocate tenant key + encryption key
- Provision default config: language(s), timezone, date formats, default CPD categories (tenant-specific), certificate template pack, email domains and SPF/DKIM settings

#### White-Label Portal Setup

- `academy.provider.com` custom domain (CNAME)
- TLS issuance and renewal
- Provider-branded theme tokens
- URL structure: `/events` (live), `/library` (on-demand), `/courses` (modules), `/my-cpd` (transcript + certificates)

#### Content Governance Controls

- Roles: Publisher (create/edit), Compliance approver (approve before publish), Analyst (reporting only)
- Approval workflows: draft -> compliance review -> published
- Versioning: preserve past activity versions for audit integrity

### 21.5 Identity Integration (SSO + account linking + adviser verification)

#### Identity Patterns to Support

1. **Public registration** (email + verification)
2. **Invite-only** (provider sends invites, only invited can access)
3. **SSO** (SAML/OIDC to provider IdP)
4. **Partner SSO** (if provider is part of a network)

#### Account Linking for the Wallet

- Primary identifier: verified email (plus hashed email for cross-tenant mapping)
- Optional identifiers: CRM contact ID, adviser registration ID, etc.
- Linking UX: "This looks like you. Link accounts?" with explicit consent

#### Adviser-Only Gating (optional but common)

- "soft gate" on library: title/description visible
- "hard gate" at certificate/credit issuance stage: verify email domain / invite list / SSO claim, then allow certificate + transcript entry

### 21.6 Content Ingestion & Modelling

#### Canonical "Activity" Schema (minimum fields)

- `activity_id` (stable, never reused)
- `type`: live_webinar | on_demand_video | article | assessment_only | bundle
- `title`, `description`, `presenters`
- `duration_minutes` (declared)
- `learning_objectives[]`
- `tags[]` (topics, level)
- `jurisdictions[]` (UK/AUS/CAN/US)
- `credit_map[]` (see below)
- `evidence_policy` (certificate required? reflection required?)
- `delivery`: URL (hosted or external), webinar platform metadata (webinar ID, occurrence rules)
- `publish_status` + version

#### Credit Mapping Schema (the moat)

Credit rules differ by regulator and sometimes by state/province:

- `credit_unit`: minutes | hours | credits | points | PDH
- `credit_amount`
- `credit_category`: ethics | professionalism | technical | practice_mgmt | other
- `structured_flag`: true/false/conditional
- `jurisdiction_scope`: country (UK/AU/CA/US), optional state/province list, exclusions list (US state approvals)
- `validation_method`: attendance | quiz | reflection | attestation

This lets a single activity issue different "credit views" depending on user profile.

### 21.7 Delivery Integrations (live webinars, on-demand, articles)

#### Live Webinars: The Gold Standard Workflow

**Goal:** registration + attendance import + rule evaluation + certificate issuance + transcript entry.

**Step A: Create webinar record** - Provider creates activity in console, chooses webinar platform (Zoom, Microsoft Teams via Graph, ON24), stores external webinar identifiers + schedule.

**Step B: Registration** - Two patterns: "Register on our portal" (recommended, you collect identity once, register in webinar platform via API), or "Register on webinar platform" (fallback, capture identity later via email matching).

**Step C: Attendance import and evaluation** - Scheduled job + webhook ingestion where available:

- **Teams / Microsoft Graph** - Attendance reports and attendance records are accessible via Graph APIs (meetingAttendanceReport and attendanceRecord patterns). [Microsoft Learn](https://learn.microsoft.com/en-us/graph/api/meetingattendancereport-get?view=graph-rest-1.0)
- **ON24** - REST API integration model with API tokens/secret keys. [ON24 Support](https://support.on24.com/hc/en-us/articles/21420786301083-REST-API-Integrations-Overview)
- **Zoom** - Webinar participant reports via reporting endpoints with scopes and rate limits. [Postman](https://www.postman.com/zoom-developer/zoom-public-workspace/request/hde4qmg/get-webinar-participant-reports)

**Step D: Credit issuance** - Once attendance meets threshold: create immutable "completion" record, create "credit issuance" record(s) (may be multiple, per jurisdiction), generate certificate PDF, add entry to learner transcript.

**Step E: Learner experience** - "You earned X minutes/credits", download certificate, "Add reflection notes" (optional), "Export audit pack".

#### On-Demand Video: Watch-Time + Quiz at Scale

**Goal:** prove engagement without expensive live ops.

- If hosted by you: use player instrumentation (timeupdate events, heartbeat), store play sessions with anti-tamper checks
- If embedded (YouTube/Vimeo): track within embedding page, treat as "attestation + optional quiz" unless you can instrument reliably

**Anti-fraud controls:** heartbeat checks (every 15 seconds), require active tab (configurable), detect "2x speed allowed?" (provider policy choice), require quiz pass for issuance (recommended if you can't fully trust watch-time).

#### Articles and "Read-and-Reflect"

- Reading timer + scroll depth
- 3-5 question knowledge check OR reflection prompts
- Certificate issued when conditions met
- Transcript entry tagged as structured/unstructured depending on jurisdiction and policy

#### External Content Logging

Learners will still do CPD outside your providers. Implement a "Log external CPD" form: title, provider, date, minutes/credits, category + structured flag, evidence upload (PDF, screenshot), optional manager approval (for firms). Essential for making the wallet "the single source of truth."

### 21.8 Certificate and Evidence: Maintenance-Free for Providers

#### Certificate Generation (template system)

- HTML templates with variable tokens: learner name, activity title, duration, learning objectives, completion timestamp, certificate ID + verification URL/QR
- Tenant-specific branding (logo, footer legal text)

#### Certificate Verification

- Public endpoint: `/certificates/{id}`
- Shows non-sensitive fields: certificate ID, provider name, title, date, credit amount
- Optional: verification code printed on PDF

#### Evidence Vault

- Store certificates + evidence attachments in object storage
- Access governed by: learner ownership, firm admin roles (if B2B), provider admin (only for their tenant learners)

#### Retention and Portability

- Default retention: multi-year (audits happen later)
- Allow learners to export: transcript CSV, full evidence ZIP ("audit pack")

### 21.9 Provider Reporting: What They Actually Need (and Will Pay For)

#### Reporting Dashboards

- Registrations by source (UTM, referrer)
- Attendance rate + drop-off
- Completion conversion (attended -> credited)
- Quiz pass rates
- Certificates issued
- Repeat attendees (retention)
- "Hours issued" (their brag metric)

#### Exports (the operational painkiller)

- Attendance export with join/leave, minutes attended
- Credit issuance export
- Certificate re-issue logs (support reduction)
- Audit trail export (immutable ledger)

#### Scheduled Reporting

Providers love "email me Monday at 9am":

- Weekly performance digest
- Monthly CPD issued digest
- Per-event "post-webinar report pack"

### 21.10 Connector Framework

Build a connector framework so every new provider doesn't cost custom engineering.

#### Connector Requirements

- OAuth credential store per provider tenant
- Webhook receiver with tenant routing
- Backfill engine: pull "last N days" of events if webhook missed, idempotent upserts
- Retry with exponential backoff and dead-letter queue
- Mapping layer: email normalization, external IDs to internal IDs

#### Practical Connector Targets (initial)

- Webinar platforms (attendance import)
- Video hosting (if you host)
- Calendar (ICS generation)
- Identity (SSO)
- CRM sync (at least outbound webhooks; then native integrations later)

### 21.11 Multi-Jurisdiction Rules: Do It Once, Reuse Forever

Building for financial advisers across: FCA, ASIC, FP Canada, FINRA, state-level regulators.

**Implementation approach:** A "Rule Pack" is a versioned JSON (or DSL) that defines: cycle length, minimum totals, category constraints, what counts as structured/verifiable, evidence requirements, audit export format.

**Key design requirement:** rule packs must be **versioned and date-effective** (rules change; you must keep historical correctness).

### 21.12 QA/UAT and Go-Live (repeatable checklists)

#### UAT Scripts (per provider, per activity type)

**Live webinar:** registration works (and correct platform registration created if applicable), attendance imported after event ends, credit issued only when threshold met, certificate generated correctly with correct metadata, transcript entry appears, provider report shows attendee.

**On-demand:** video progress captured, quiz gate works, certificate and transcript correct.

**External log:** user logs, evidence stored, export works.

#### Go-Live Checklist

- Domain + TLS validated
- Email deliverability (SPF/DKIM) set
- Tokens configured in connector vault
- Monitoring alerts set (API errors, webhook failures)
- Support playbook: "I didn't get a certificate", "It says I didn't attend", "I used a different email"
- Backfill job run for initial historical content (if required)

### 21.13 Ongoing Ops: Eliminate Maintenance for Providers

What you sell: providers stop building ad hoc CPD mini-sites every year, stop manually sending certificates, stop reconciling attendance spreadsheets, stop answering the same support tickets.

**What you run as a managed service:** connector health monitoring, automatic backfills after outages, certificate template updates (compliance changes), rules pack updates (jurisdiction changes), security patching and platform upgrades.

### 21.14 Provider-Facing USPs (implementation terms)

| # | USP | What It Delivers |
|---|-----|-----------------|
| 1 | **Stop building CPD microsites** | White-label academy + certificate + transcript out of the box |
| 2 | **Stop running certificate operations** | Automatic issuance + permanent re-download vault |
| 3 | **Stop reconciling attendance spreadsheets** | Attendance connectors + rule-based credit issuance + audit exports (especially valuable in US state-by-state complexity) |
| 4 | **Stop losing learner proof** | Wallet + evidence vault + audit packs reduce support and improve retention |
| 5 | **Integrate once; keep your stack** | BYO delivery lane means they don't migrate everything, just wrap it with your CPD OS |

---

## Next Steps

To narrow this into execution-ready materials, decide:

1. **Which market first?** (US CFP/IAR vs UK FCA vs AU)
2. **Option 1 or 2 for content?** (Partner/affiliate vs own accreditation)
3. **Domain name** (verify availability, register)

From there: single best wedge offer -> 3 exact landing page variants -> keyword list + ad copy pack -> launch.
